{"ast":null,"code":"import { call, put, takeLeading } from 'redux-saga/effects';\nimport { REQUEST_ADD_NEW_COMMENT, REQUEST_ADD_NEW_POST, REQUEST_CHANGE_COMMENT, REQUEST_CHANGE_POST, REQUEST_DELETE_COMMENT, REQUEST_DELETE_POST, REQUEST_GET_CORRENT_POST, REQUEST_GET_POSTS_ALL, REQUEST_LOG_OUT } from '../actions/types';\nimport { addNewComment, addNewPost, changePost, deleteComment, deletePost, getCorrentPost, getPostsAll } from '../actions/post';\nimport { REQUEST_LOG_IN, REQUEST_GET_PROFILE, REQUEST_SIGN_IN } from '../actions/types';\nimport { APIlogIn, APIsignIn } from '../../API/auth/POST';\nimport { APIgetCorrentPost, APIgetPostsAll } from '../../API/posts/GET';\nimport { APIAddNewPost } from '../../API/posts/POST';\nimport { APIDeletePost } from '../../API/posts/DELETE';\nimport { APIChangePost } from '../../API/posts/PUT';\nimport { APIAddNewComment } from '../../API/comments/POST';\nimport { APIdeleteComment } from '../../API/comments/DELETE';\nimport { APIchangeComment } from '../../API/comments/PUT';\nimport { APIgetProfile } from '../../API/auth/GET';\nimport { removeError, setError } from '../actions/error';\nimport { signIn } from '../actions/user';\n\nconst delay = ms => new Promise(res => setTimeout(res, ms));\n\nexport function* sagaWatcher() {\n  yield takeLeading(REQUEST_SIGN_IN, sagaSignIn);\n  yield takeLeading(REQUEST_LOG_IN, sagaLogIn);\n  yield takeLeading(REQUEST_ADD_NEW_POST, sagaNewPostAdd);\n  yield takeLeading(REQUEST_DELETE_POST, sagaDeletePost);\n  yield takeLeading(REQUEST_CHANGE_POST, sagaChangePost);\n  yield takeLeading(REQUEST_ADD_NEW_COMMENT, sagaAddNewComment);\n  yield takeLeading(REQUEST_DELETE_COMMENT, sagaDeleteComment);\n  yield takeLeading(REQUEST_GET_CORRENT_POST, sagaGetCorrentPost);\n  yield takeLeading(REQUEST_CHANGE_COMMENT, sagaChangeComment);\n  yield takeLeading(REQUEST_GET_PROFILE, sageGetProfile);\n  yield takeLeading(REQUEST_GET_POSTS_ALL, sagaGetPostsAll);\n  yield takeLeading(REQUEST_LOG_OUT, sagaLogOut);\n} //-----------------------------------------------------------//\n//---------- Настройка Всплывающего окна с ошибкой ----------//\n//-----------------------------------------------------------//\n\nfunction* showError(error) {\n  let timeOut = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5000;\n  yield put(setError(error));\n  yield delay(timeOut);\n  yield put(removeError());\n} //-----------------------------------------------------------//\n//--------------- Операции с ауентификацией -----------------//\n//-----------------------------------------------------------//\n//------ Вход, получение токена и постов ------ //\n\n\nfunction* sagaSignIn() {\n  try {\n    const payload = yield call(APIsignIn);\n    yield put(signIn(payload));\n  } catch (error) {\n    yield showError(error.response.data);\n  }\n} //------ Регистрация ------ //\n\n\nfunction* sagaLogIn() {\n  try {\n    yield call(APIlogIn);\n  } catch (error) {\n    yield showError('error');\n  }\n} //------ Если есть токен - Оставить пользователя залогиненым ------ //\n\n\nfunction* sageGetProfile() {\n  try {\n    const response = yield call(APIgetProfile);\n    const allPosts = yield call(APIgetPostsAll);\n    yield put(getPostsAll(allPosts));\n    yield put(signIn(response));\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n} //------ Выход из сессии ------ //\n\n\nfunction* sagaLogOut() {\n  try {\n    yield call(APIlogOut);\n    yield put(logOut());\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n} //-----------------------------------------------------------//\n//--------------- Операции с постами ------------------------//\n//-----------------------------------------------------------//\n//------ Получить все посты ------ //\n\n\nfunction* sagaGetPostsAll() {\n  try {\n    const response = yield call(APIgetPostsAll);\n    yield put(getPostsAll(response));\n  } catch (error) {\n    console.log(error.response.data);\n    yield showError(error.response.data || `\n        что-то пошло не так\n    `);\n  }\n} //------ Добавить новый пост ------ //\n\n\nfunction* sagaNewPostAdd(action) {\n  try {\n    const payload = yield call(APIAddNewPost, action.payload);\n    yield put(addNewPost(payload));\n  } catch (error) {\n    console.log(error.response.data);\n    yield showError(error.response.data || `\n        что-то пошло не так\n    `);\n  }\n} //------ Удалить выбранный пост ------ //\n\n\nfunction* sagaDeletePost(action) {\n  try {\n    yield call(APIDeletePost, action.payload);\n    yield put(deletePost(action.payload));\n  } catch (error) {\n    console.log(error.response);\n    yield showError(error.response.data.message);\n  }\n} //------ Изменить выбранный пост ------ //\n\n\nfunction* sagaChangePost(action) {\n  try {\n    const changedPost = yield call(APIChangePost, action.payload);\n    yield put(changePost(changedPost));\n  } catch (error) {\n    console.log(error.response.data);\n    yield showError(error.response.data);\n  }\n} //------ Получить выбранный пост по id  ------ //\n\n\nfunction* sagaGetCorrentPost(action) {\n  try {\n    const postData = yield call(APIgetCorrentPost, action.payload);\n    yield put(getCorrentPost(postData));\n  } catch (error) {\n    yield showError(error.response.data.message || `\n      post Not Found\n      `);\n  }\n} //-----------------------------------------------------------//\n//--------------- Операции с комментариями ------------------//\n//-----------------------------------------------------------//\n//------ Добавить новый комментарий ------ //\n\n\nfunction* sagaAddNewComment(action) {\n  try {\n    const newPost = yield call(APIAddNewComment, action.payload);\n    yield put(addNewComment(newPost));\n  } catch (error) {\n    yield showError(error.response.data.message || `\n        Вы ввели слишком много символов!\n        Комментарий не будет опубликован\n    `);\n  }\n} //------ Удалить выбранный комментарий ------ //\n\n\nfunction* sagaDeleteComment(action) {\n  try {\n    yield call(APIdeleteComment, action.payload.commentId);\n    yield put(deleteComment(action.payload.commentId, action.payload.postId));\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n} //------ Измененить комментарий  ------ //\n\n\nfunction* sagaChangeComment(action) {\n  try {\n    yield call(APIchangeComment, action.payload);\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n}","map":{"version":3,"sources":["/home/dev/Desktop/socialFront/src/Redux/sagas/sagas.js"],"names":["call","put","takeLeading","REQUEST_ADD_NEW_COMMENT","REQUEST_ADD_NEW_POST","REQUEST_CHANGE_COMMENT","REQUEST_CHANGE_POST","REQUEST_DELETE_COMMENT","REQUEST_DELETE_POST","REQUEST_GET_CORRENT_POST","REQUEST_GET_POSTS_ALL","REQUEST_LOG_OUT","addNewComment","addNewPost","changePost","deleteComment","deletePost","getCorrentPost","getPostsAll","REQUEST_LOG_IN","REQUEST_GET_PROFILE","REQUEST_SIGN_IN","APIlogIn","APIsignIn","APIgetCorrentPost","APIgetPostsAll","APIAddNewPost","APIDeletePost","APIChangePost","APIAddNewComment","APIdeleteComment","APIchangeComment","APIgetProfile","removeError","setError","signIn","delay","ms","Promise","res","setTimeout","sagaWatcher","sagaSignIn","sagaLogIn","sagaNewPostAdd","sagaDeletePost","sagaChangePost","sagaAddNewComment","sagaDeleteComment","sagaGetCorrentPost","sagaChangeComment","sageGetProfile","sagaGetPostsAll","sagaLogOut","showError","error","timeOut","payload","response","data","allPosts","message","APIlogOut","logOut","console","log","action","changedPost","postData","newPost","commentId","postId"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,WAApB,QAAuC,oBAAvC;AACA,SACEC,uBADF,EAEEC,oBAFF,EAGEC,sBAHF,EAIEC,mBAJF,EAKEC,sBALF,EAMEC,mBANF,EAOEC,wBAPF,EAQEC,qBARF,EASEC,eATF,QAUO,kBAVP;AAYA,SACEC,aADF,EAEEC,UAFF,EAGEC,UAHF,EAIEC,aAJF,EAKEC,UALF,EAMEC,cANF,EAOEC,WAPF,QAQO,iBARP;AAUA,SACEC,cADF,EAEEC,mBAFF,EAGEC,eAHF,QAIO,kBAJP;AAKA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,qBAApC;AACA,SAASC,iBAAT,EAA4BC,cAA5B,QAAkD,qBAAlD;AACA,SAASC,aAAT,QAA8B,sBAA9B;AACA,SAASC,aAAT,QAA8B,wBAA9B;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,SAASC,gBAAT,QAAiC,yBAAjC;AACA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,kBAAtC;AACA,SAASC,MAAT,QAAuB,iBAAvB;;AAEA,MAAMC,KAAK,GAAIC,EAAD,IAAQ,IAAIC,OAAJ,CAAaC,GAAD,IAASC,UAAU,CAACD,GAAD,EAAMF,EAAN,CAA/B,CAAtB;;AAEA,OAAO,UAAUI,WAAV,GAAwB;AAC7B,QAAMvC,WAAW,CAACmB,eAAD,EAAkBqB,UAAlB,CAAjB;AACA,QAAMxC,WAAW,CAACiB,cAAD,EAAiBwB,SAAjB,CAAjB;AACA,QAAMzC,WAAW,CAACE,oBAAD,EAAuBwC,cAAvB,CAAjB;AACA,QAAM1C,WAAW,CAACM,mBAAD,EAAsBqC,cAAtB,CAAjB;AACA,QAAM3C,WAAW,CAACI,mBAAD,EAAsBwC,cAAtB,CAAjB;AACA,QAAM5C,WAAW,CAACC,uBAAD,EAA0B4C,iBAA1B,CAAjB;AACA,QAAM7C,WAAW,CAACK,sBAAD,EAAyByC,iBAAzB,CAAjB;AACA,QAAM9C,WAAW,CAACO,wBAAD,EAA2BwC,kBAA3B,CAAjB;AACA,QAAM/C,WAAW,CAACG,sBAAD,EAAyB6C,iBAAzB,CAAjB;AACA,QAAMhD,WAAW,CAACkB,mBAAD,EAAsB+B,cAAtB,CAAjB;AACA,QAAMjD,WAAW,CAACQ,qBAAD,EAAwB0C,eAAxB,CAAjB;AACA,QAAMlD,WAAW,CAACS,eAAD,EAAkB0C,UAAlB,CAAjB;AACD,C,CACD;AACA;AACA;;AAEA,UAAUC,SAAV,CAAoBC,KAApB,EAA2C;AAAA,MAAhBC,OAAgB,uEAAN,IAAM;AACzC,QAAMvD,GAAG,CAACiC,QAAQ,CAACqB,KAAD,CAAT,CAAT;AACA,QAAMnB,KAAK,CAACoB,OAAD,CAAX;AACA,QAAMvD,GAAG,CAACgC,WAAW,EAAZ,CAAT;AACD,C,CAED;AACA;AACA;AAEA;;;AAEA,UAAUS,UAAV,GAAuB;AACrB,MAAI;AACF,UAAMe,OAAO,GAAG,MAAMzD,IAAI,CAACuB,SAAD,CAA1B;AACA,UAAMtB,GAAG,CAACkC,MAAM,CAACsB,OAAD,CAAP,CAAT;AACD,GAHD,CAGE,OAAOF,KAAP,EAAc;AACd,UAAMD,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAhB,CAAf;AACD;AACF,C,CAED;;;AAEA,UAAUhB,SAAV,GAAsB;AACpB,MAAI;AACF,UAAM3C,IAAI,CAACsB,QAAD,CAAV;AACD,GAFD,CAEE,OAAOiC,KAAP,EAAc;AACd,UAAMD,SAAS,CAAC,OAAD,CAAf;AACD;AACF,C,CAED;;;AAEA,UAAUH,cAAV,GAA2B;AACzB,MAAI;AACF,UAAMO,QAAQ,GAAG,MAAM1D,IAAI,CAACgC,aAAD,CAA3B;AACA,UAAM4B,QAAQ,GAAG,MAAM5D,IAAI,CAACyB,cAAD,CAA3B;AACA,UAAMxB,GAAG,CAACiB,WAAW,CAAC0C,QAAD,CAAZ,CAAT;AACA,UAAM3D,GAAG,CAACkC,MAAM,CAACuB,QAAD,CAAP,CAAT;AACD,GALD,CAKE,OAAOH,KAAP,EAAc;AACd,UAAMD,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAArB,CAAf;AACD;AACF,C,CAED;;;AAEA,UAAUR,UAAV,GAAuB;AACrB,MAAI;AACF,UAAMrD,IAAI,CAAC8D,SAAD,CAAV;AACA,UAAM7D,GAAG,CAAC8D,MAAM,EAAP,CAAT;AACD,GAHD,CAGE,OAAOR,KAAP,EAAc;AACd,UAAMD,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAArB,CAAf;AACD;AACF,C,CAED;AACA;AACA;AAEA;;;AAEA,UAAUT,eAAV,GAA4B;AAC1B,MAAI;AACF,UAAMM,QAAQ,GAAG,MAAM1D,IAAI,CAACyB,cAAD,CAA3B;AACA,UAAMxB,GAAG,CAACiB,WAAW,CAACwC,QAAD,CAAZ,CAAT;AACD,GAHD,CAGE,OAAOH,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACG,QAAN,CAAeC,IAA3B;AACA,UAAML,SAAS,CACbC,KAAK,CAACG,QAAN,CAAeC,IAAf,IACG;AACT;AACA,KAJmB,CAAf;AAMD;AACF,C,CAED;;;AAEA,UAAUf,cAAV,CAAyBsB,MAAzB,EAAiC;AAC/B,MAAI;AACF,UAAMT,OAAO,GAAG,MAAMzD,IAAI,CAAC0B,aAAD,EAAgBwC,MAAM,CAACT,OAAvB,CAA1B;AACA,UAAMxD,GAAG,CAACY,UAAU,CAAC4C,OAAD,CAAX,CAAT;AACD,GAHD,CAGE,OAAOF,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACG,QAAN,CAAeC,IAA3B;AACA,UAAML,SAAS,CACbC,KAAK,CAACG,QAAN,CAAeC,IAAf,IACG;AACT;AACA,KAJmB,CAAf;AAMD;AACF,C,CAED;;;AAEA,UAAUd,cAAV,CAAyBqB,MAAzB,EAAiC;AAC/B,MAAI;AACF,UAAMlE,IAAI,CAAC2B,aAAD,EAAgBuC,MAAM,CAACT,OAAvB,CAAV;AACA,UAAMxD,GAAG,CAACe,UAAU,CAACkD,MAAM,CAACT,OAAR,CAAX,CAAT;AACD,GAHD,CAGE,OAAOF,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACG,QAAlB;AACA,UAAMJ,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAArB,CAAf;AACD;AACF,C,CAED;;;AAEA,UAAUf,cAAV,CAAyBoB,MAAzB,EAAiC;AAC/B,MAAI;AACF,UAAMC,WAAW,GAAG,MAAMnE,IAAI,CAAC4B,aAAD,EAAgBsC,MAAM,CAACT,OAAvB,CAA9B;AACA,UAAMxD,GAAG,CAACa,UAAU,CAACqD,WAAD,CAAX,CAAT;AACD,GAHD,CAGE,OAAOZ,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACG,QAAN,CAAeC,IAA3B;AACA,UAAML,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAhB,CAAf;AACD;AACF,C,CAED;;;AAEA,UAAUV,kBAAV,CAA6BiB,MAA7B,EAAqC;AACnC,MAAI;AACF,UAAME,QAAQ,GAAG,MAAMpE,IAAI,CAACwB,iBAAD,EAAoB0C,MAAM,CAACT,OAA3B,CAA3B;AACA,UAAMxD,GAAG,CAACgB,cAAc,CAACmD,QAAD,CAAf,CAAT;AACD,GAHD,CAGE,OAAOb,KAAP,EAAc;AACd,UAAMD,SAAS,CACbC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAApB,IACG;AACT;AACA,OAJmB,CAAf;AAMD;AACF,C,CAED;AACA;AACA;AAEA;;;AAEA,UAAUd,iBAAV,CAA4BmB,MAA5B,EAAoC;AAClC,MAAI;AACF,UAAMG,OAAO,GAAG,MAAMrE,IAAI,CAAC6B,gBAAD,EAAmBqC,MAAM,CAACT,OAA1B,CAA1B;AACA,UAAMxD,GAAG,CAACW,aAAa,CAACyD,OAAD,CAAd,CAAT;AACD,GAHD,CAGE,OAAOd,KAAP,EAAc;AACd,UAAMD,SAAS,CACbC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAApB,IACG;AACT;AACA;AACA,KALmB,CAAf;AAOD;AACF,C,CAED;;;AAEA,UAAUb,iBAAV,CAA4BkB,MAA5B,EAAoC;AAClC,MAAI;AACF,UAAMlE,IAAI,CAAC8B,gBAAD,EAAmBoC,MAAM,CAACT,OAAP,CAAea,SAAlC,CAAV;AACA,UAAMrE,GAAG,CAACc,aAAa,CAACmD,MAAM,CAACT,OAAP,CAAea,SAAhB,EAA2BJ,MAAM,CAACT,OAAP,CAAec,MAA1C,CAAd,CAAT;AACD,GAHD,CAGE,OAAOhB,KAAP,EAAc;AACd,UAAMD,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAArB,CAAf;AACD;AACF,C,CAED;;;AAEA,UAAUX,iBAAV,CAA4BgB,MAA5B,EAAoC;AAClC,MAAI;AACF,UAAMlE,IAAI,CAAC+B,gBAAD,EAAmBmC,MAAM,CAACT,OAA1B,CAAV;AACD,GAFD,CAEE,OAAOF,KAAP,EAAc;AACd,UAAMD,SAAS,CAACC,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBE,OAArB,CAAf;AACD;AACF","sourcesContent":["import { call, put, takeLeading } from 'redux-saga/effects';\nimport {\n  REQUEST_ADD_NEW_COMMENT,\n  REQUEST_ADD_NEW_POST,\n  REQUEST_CHANGE_COMMENT,\n  REQUEST_CHANGE_POST,\n  REQUEST_DELETE_COMMENT,\n  REQUEST_DELETE_POST,\n  REQUEST_GET_CORRENT_POST,\n  REQUEST_GET_POSTS_ALL,\n  REQUEST_LOG_OUT,\n} from '../actions/types';\n\nimport {\n  addNewComment,\n  addNewPost,\n  changePost,\n  deleteComment,\n  deletePost,\n  getCorrentPost,\n  getPostsAll,\n} from '../actions/post';\n\nimport {\n  REQUEST_LOG_IN,\n  REQUEST_GET_PROFILE,\n  REQUEST_SIGN_IN,\n} from '../actions/types';\nimport { APIlogIn, APIsignIn } from '../../API/auth/POST';\nimport { APIgetCorrentPost, APIgetPostsAll } from '../../API/posts/GET';\nimport { APIAddNewPost } from '../../API/posts/POST';\nimport { APIDeletePost } from '../../API/posts/DELETE';\nimport { APIChangePost } from '../../API/posts/PUT';\nimport { APIAddNewComment } from '../../API/comments/POST';\nimport { APIdeleteComment } from '../../API/comments/DELETE';\nimport { APIchangeComment } from '../../API/comments/PUT';\nimport { APIgetProfile } from '../../API/auth/GET';\nimport { removeError, setError } from '../actions/error';\nimport { signIn } from '../actions/user';\n\nconst delay = (ms) => new Promise((res) => setTimeout(res, ms));\n\nexport function* sagaWatcher() {\n  yield takeLeading(REQUEST_SIGN_IN, sagaSignIn);\n  yield takeLeading(REQUEST_LOG_IN, sagaLogIn);\n  yield takeLeading(REQUEST_ADD_NEW_POST, sagaNewPostAdd);\n  yield takeLeading(REQUEST_DELETE_POST, sagaDeletePost);\n  yield takeLeading(REQUEST_CHANGE_POST, sagaChangePost);\n  yield takeLeading(REQUEST_ADD_NEW_COMMENT, sagaAddNewComment);\n  yield takeLeading(REQUEST_DELETE_COMMENT, sagaDeleteComment);\n  yield takeLeading(REQUEST_GET_CORRENT_POST, sagaGetCorrentPost);\n  yield takeLeading(REQUEST_CHANGE_COMMENT, sagaChangeComment);\n  yield takeLeading(REQUEST_GET_PROFILE, sageGetProfile);\n  yield takeLeading(REQUEST_GET_POSTS_ALL, sagaGetPostsAll);\n  yield takeLeading(REQUEST_LOG_OUT, sagaLogOut);\n}\n//-----------------------------------------------------------//\n//---------- Настройка Всплывающего окна с ошибкой ----------//\n//-----------------------------------------------------------//\n\nfunction* showError(error, timeOut = 5000) {\n  yield put(setError(error));\n  yield delay(timeOut);\n  yield put(removeError());\n}\n\n//-----------------------------------------------------------//\n//--------------- Операции с ауентификацией -----------------//\n//-----------------------------------------------------------//\n\n//------ Вход, получение токена и постов ------ //\n\nfunction* sagaSignIn() {\n  try {\n    const payload = yield call(APIsignIn);\n    yield put(signIn(payload));\n  } catch (error) {\n    yield showError(error.response.data);\n  }\n}\n\n//------ Регистрация ------ //\n\nfunction* sagaLogIn() {\n  try {\n    yield call(APIlogIn);\n  } catch (error) {\n    yield showError('error');\n  }\n}\n\n//------ Если есть токен - Оставить пользователя залогиненым ------ //\n\nfunction* sageGetProfile() {\n  try {\n    const response = yield call(APIgetProfile);\n    const allPosts = yield call(APIgetPostsAll);\n    yield put(getPostsAll(allPosts));\n    yield put(signIn(response));\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n}\n\n//------ Выход из сессии ------ //\n\nfunction* sagaLogOut() {\n  try {\n    yield call(APIlogOut);\n    yield put(logOut());\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n}\n\n//-----------------------------------------------------------//\n//--------------- Операции с постами ------------------------//\n//-----------------------------------------------------------//\n\n//------ Получить все посты ------ //\n\nfunction* sagaGetPostsAll() {\n  try {\n    const response = yield call(APIgetPostsAll);\n    yield put(getPostsAll(response));\n  } catch (error) {\n    console.log(error.response.data);\n    yield showError(\n      error.response.data ||\n        `\n        что-то пошло не так\n    `\n    );\n  }\n}\n\n//------ Добавить новый пост ------ //\n\nfunction* sagaNewPostAdd(action) {\n  try {\n    const payload = yield call(APIAddNewPost, action.payload);\n    yield put(addNewPost(payload));\n  } catch (error) {\n    console.log(error.response.data);\n    yield showError(\n      error.response.data ||\n        `\n        что-то пошло не так\n    `\n    );\n  }\n}\n\n//------ Удалить выбранный пост ------ //\n\nfunction* sagaDeletePost(action) {\n  try {\n    yield call(APIDeletePost, action.payload);\n    yield put(deletePost(action.payload));\n  } catch (error) {\n    console.log(error.response);\n    yield showError(error.response.data.message);\n  }\n}\n\n//------ Изменить выбранный пост ------ //\n\nfunction* sagaChangePost(action) {\n  try {\n    const changedPost = yield call(APIChangePost, action.payload);\n    yield put(changePost(changedPost));\n  } catch (error) {\n    console.log(error.response.data);\n    yield showError(error.response.data);\n  }\n}\n\n//------ Получить выбранный пост по id  ------ //\n\nfunction* sagaGetCorrentPost(action) {\n  try {\n    const postData = yield call(APIgetCorrentPost, action.payload);\n    yield put(getCorrentPost(postData));\n  } catch (error) {\n    yield showError(\n      error.response.data.message ||\n        `\n      post Not Found\n      `\n    );\n  }\n}\n\n//-----------------------------------------------------------//\n//--------------- Операции с комментариями ------------------//\n//-----------------------------------------------------------//\n\n//------ Добавить новый комментарий ------ //\n\nfunction* sagaAddNewComment(action) {\n  try {\n    const newPost = yield call(APIAddNewComment, action.payload);\n    yield put(addNewComment(newPost));\n  } catch (error) {\n    yield showError(\n      error.response.data.message ||\n        `\n        Вы ввели слишком много символов!\n        Комментарий не будет опубликован\n    `\n    );\n  }\n}\n\n//------ Удалить выбранный комментарий ------ //\n\nfunction* sagaDeleteComment(action) {\n  try {\n    yield call(APIdeleteComment, action.payload.commentId);\n    yield put(deleteComment(action.payload.commentId, action.payload.postId));\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n}\n\n//------ Измененить комментарий  ------ //\n\nfunction* sagaChangeComment(action) {\n  try {\n    yield call(APIchangeComment, action.payload);\n  } catch (error) {\n    yield showError(error.response.data.message);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}